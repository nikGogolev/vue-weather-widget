(function(e){function t(t){for(var r,c,a=t[0],n=t[1],d=t[2],u=0,h=[];u<a.length;u++)c=a[u],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&h.push(i[c][0]),i[c]=0;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);l&&l(t);while(h.length)h.shift()();return s.push.apply(s,d||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],r=!0,a=1;a<o.length;a++){var n=o[a];0!==i[n]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=o[0]))}return e}var r={},i={app:0},s=[];function c(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=r,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(o,r,function(t){return e[t]}.bind(null,r));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/vue-weather-widget/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],n=a.push.bind(a);a.push=t,a=a.slice();for(var d=0;d<a.length;d++)t(a[d]);var l=n;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"06fe":function(e,t,o){},"0ca0":function(e,t,o){},"2a62":function(e,t,o){"use strict";o("3c12")},"2dac":function(e,t,o){},"3c12":function(e,t,o){},"3d81":function(e,t,o){"use strict";o("2dac")},"48fb":function(e,t,o){"use strict";o("48fd")},"48fd":function(e,t,o){},7428:function(e,t,o){"use strict";o("06fe")},"9ec6":function(e,t,o){},a470:function(e,t,o){"use strict";o("de5d")},ab65:function(e,t,o){"use strict";o("9ec6")},cb6e:function(e,t,o){"use strict";o("0ca0")},cd49:function(e,t,o){"use strict";o.r(t);var r=o("7a23");function i(e,t,o,i,s,c){const a=Object(r["A"])("Modal"),n=Object(r["A"])("router-view");return Object(r["s"])(),Object(r["f"])(r["a"],null,[e.error?(Object(r["s"])(),Object(r["d"])(a,{key:0,onClose:t[0]||(t[0]=t=>e.error=!1),errorText:e.errorText},null,8,["errorText"])):Object(r["e"])("",!0),Object(r["i"])(n,{onError:t[1]||(t[1]=t=>e.setError(t))})],64)}class s{constructor(){this.coord={lon:0,lat:0},this.main={temp:0,feels_like:0,temp_min:0,temp_max:0,pressure:0,humidity:0},this.wind={speed:0,deg:0,gust:0},this.clouds={all:0},this.weather=[{id:0,main:"",description:"",icon:""}],this.sys={type:0,id:0,country:"",sunrise:0,sunset:0},this.visibility=0,this.name=""}}class c{constructor(){this.id=0,this.city="",this.country_code="",this.country=""}}var a=o("5502");const n="ADD_LOCATION",d="RESTORE_LOCATIONS",l="REMOVE_LOCATION",u="CHANGE_LOCATIONS";var h=Object(a["a"])({state:{currentWeather:new s,locations:new Array},mutations:{[n](e,t){let o=!1;e.locations.forEach(e=>{e.id===t.id&&(o=!0)}),o||(e.locations.push(t),localStorage.setItem("myWeatherLocations",JSON.stringify(e.locations)))},[d](e){const t=localStorage.getItem("myWeatherLocations");if(t){const o=JSON.parse(t);e.locations=o}},[l](e,t){const o=e.locations.findIndex(e=>e.id===t);e.locations.splice(o,1),localStorage.setItem("myWeatherLocations",JSON.stringify(e.locations))},[u](e,t){const o=e.locations.findIndex(e=>e.id===t.movingId),r=e.locations.splice(o,1),i=e.locations.findIndex(e=>e.id===t.idTochange);e.locations.splice(i,0,r[0]),localStorage.setItem("myWeatherLocations",JSON.stringify(e.locations))}},actions:{},modules:{},getters:{getLocations(e){return e.locations},getLocationById:e=>t=>e.locations.find(e=>e.id===t)}});const b={class:"modal_backdrop"},m={class:"modal"},p=Object(r["g"])("header",{class:"modal_header"},"Error!",-1),O={class:"modal_text"};function j(e,t,o,i,s,c){return Object(r["s"])(),Object(r["f"])("div",b,[Object(r["g"])("div",m,[p,Object(r["g"])("div",O,Object(r["C"])(e.errorText),1),Object(r["g"])("button",{type:"button",class:"btn_close",onClick:t[0]||(t[0]=t=>e.$emit("close"))}," Close ")])])}var f=o("5c40"),v=Object(f["n"])({name:"ErrorModal",props:{errorText:{type:String,required:!0}},emits:["close"]}),g=(o("2a62"),o("6b0d")),w=o.n(g);const y=w()(v,[["render",j]]);var _=y,C=Object(r["j"])({name:"App",components:{Modal:_},data(){return{error:!1,errorText:""}},methods:{setError(e){this.error=!0,this.errorText=e}},created(){h.commit(d)}});o("7428");const k=w()(C,[["render",i]]);var x=k,L=o("9483");Object(L["a"])("/vue-weather-widget/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var E=o("6605");function A(e,t,o,i,s,c){const a=Object(r["A"])("weather-view");return Object(r["s"])(),Object(r["d"])(a,{weather:e.weather},null,8,["weather"])}o("d9e2");const S={class:"header"},T={class:"weather"},I={class:"temperature"},$=["src"],W={class:"weather_temperature"},F={class:"description"},N={class:"weather_description"},P={class:"wind_pressure"},H={class:"weather_wind"},M={class:"weather_pressure"},q={class:"humidity_visibility"},D={class:"weather_humidity"},V={class:"weather_visibility"};function J(e,t,o,i,s,c){var a,n,d;const l=Object(r["A"])("font-awesome-icon"),u=Object(r["A"])("router-link");return Object(r["s"])(),Object(r["f"])("div",{class:"root",style:Object(r["o"])({backgroundImage:`url(${e.bgImage})`})},[Object(r["g"])("div",S,[Object(r["g"])("h3",null,Object(r["C"])(null===(a=e.weather)||void 0===a?void 0:a.name)+", "+Object(r["C"])(null===(n=e.weather)||void 0===n?void 0:n.sys.country),1),Object(r["i"])(u,{class:"",to:"/settings"},{default:Object(r["G"])(()=>[Object(r["i"])(l,{class:"settings",icon:"fa-solid fa-gear fa-10x"})]),_:1})]),Object(r["g"])("div",T,[Object(r["g"])("div",I,[Object(r["g"])("img",{src:e.weatherIcon,alt:"weather image"},null,8,$),Object(r["g"])("span",W,Object(r["C"])(e.weatherTemp)+" C",1)]),Object(r["g"])("div",F,[Object(r["g"])("p",N," Feels like "+Object(r["C"])(e.weatherFeelsLikeTemp)+" C. "+Object(r["C"])(e.weatherDescription),1)]),Object(r["g"])("div",P,[Object(r["i"])(l,{style:Object(r["o"])({transform:`rotate(${(null===(d=e.weather)||void 0===d?void 0:d.wind.deg)-45}deg)`}),class:"wind_direction",icon:"fa-solid fa-location-arrow"},null,8,["style"]),Object(r["g"])("span",H,Object(r["C"])(e.weatherWindSpeed)+" m/s",1),Object(r["g"])("span",M,Object(r["C"])(e.weatherPressure)+" hPa",1)]),Object(r["g"])("div",q,[Object(r["g"])("span",D,"Humidity: "+Object(r["C"])(e.weatherHumidity)+" %",1),Object(r["g"])("span",V,"Visibility: "+Object(r["C"])(e.weatherVisibility),1)])])],4)}const G=e=>e.charAt(0).toUpperCase()+e.slice(1);class R{constructor(){this.coord={lon:0,lat:0},this.main={temp:0,feels_like:0,temp_min:0,temp_max:0,pressure:0,humidity:0},this.wind={speed:0,deg:0,gust:0},this.clouds={all:0},this.weather=[{id:0,main:"",description:"",icon:""}],this.sys={type:0,id:0,country:"",sunrise:0,sunset:0},this.visibility=0,this.name=""}}var B=Object(r["j"])({name:"WeatherView",props:{weather:{type:Object,require:!0,default:()=>({coord:{lon:0,lat:0},main:{temp:0,feels_like:0,temp_min:0,temp_max:0,pressure:0,humidity:0},wind:{speed:0,deg:0,gust:0},clouds:{all:0},weather:[{id:0,main:"",description:"",icon:""}],visibility:0})}},data(){return{weatherIcon1:"",bgImage:"https://images.wallpaperscraft.ru/image/single/oblaka_nebo_goluboj_113445_2560x1440.jpg"}},computed:{weatherIcon(){var e;return"http://openweathermap.org/img/wn/"+(null===(e=this.weather)||void 0===e?void 0:e.weather[0].icon)+"@2x.png"},weatherTemp(){var e;return((null===(e=this.weather)||void 0===e?void 0:e.main.temp)-273).toFixed(1)},weatherFeelsLikeTemp(){var e;return((null===(e=this.weather)||void 0===e?void 0:e.main.feels_like)-273).toFixed(1)},weatherWindSpeed(){var e;return null===(e=this.weather)||void 0===e?void 0:e.wind.speed.toFixed(1)},weatherHumidity(){var e;return null===(e=this.weather)||void 0===e?void 0:e.main.humidity.toFixed(0)},weatherPressure(){var e;return null===(e=this.weather)||void 0===e?void 0:e.main.pressure.toFixed(0)},weatherVisibility(){var e,t,o;return(null===(e=this.weather)||void 0===e?void 0:e.visibility)<1e3?(null===(t=this.weather)||void 0===t?void 0:t.visibility.toFixed(0))+" m":((null===(o=this.weather)||void 0===o?void 0:o.visibility)/1e3).toFixed(0)+" km"},weatherDescription(){var e;return G(null===(e=this.weather)||void 0===e?void 0:e.weather[0].description)}}});o("ab65");const U=w()(B,[["render",J],["__scopeId","data-v-7a01ed90"]]);var z=U;const K="f0694cc740867c7440b3be0552c0bf8f";var Q=Object(r["j"])({name:"Home",components:{WeatherView:z},emits:["error"],async created(){await this.getLocation(),await this.getWeather()},data(){return{weather:new R,location:""}},methods:{async getLocation(){const e="https://ipinfo.io/json?token=84b997d0b6009a",t=await fetch(e),o=await t.json();this.location=o.city},async getWeather(){try{const e=`https://api.openweathermap.org/data/2.5/weather?q=${this.location}&appid=${K}`,t=await fetch(e);if(200!==t.status)throw new Error(t.statusText);const o=await t.json();this.weather=o}catch(e){e instanceof Error&&this.setError(e.message)}},setError(e){this.$emit("error",e)}}});const X=w()(Q,[["render",A]]);var Y=X;const Z=e=>(Object(r["v"])("data-v-398b9082"),e=e(),Object(r["t"])(),e),ee={class:"settings"},te={class:"header"},oe=Object(r["h"])(" Home"),re=Z(()=>Object(r["g"])("h3",null,"Locations",-1));function ie(e,t,o,i,s,c){const a=Object(r["A"])("font-awesome-icon"),n=Object(r["A"])("router-link"),d=Object(r["A"])("location-card"),l=Object(r["A"])("search-component");return Object(r["s"])(),Object(r["f"])("div",ee,[Object(r["g"])("div",te,[Object(r["g"])("button",{onClick:t[0]||(t[0]=(...t)=>e.$router.back&&e.$router.back(...t)),class:"back_button"},[Object(r["i"])(a,{icon:"fa-solid fa-angles-left"})]),Object(r["i"])(n,{class:"home_link",to:"/"},{default:Object(r["G"])(()=>[oe]),_:1}),re]),e.locations?(Object(r["s"])(),Object(r["f"])("div",{key:0,class:"locations",onDragstart:t[1]||(t[1]=(...t)=>e.setClass&&e.setClass(...t)),onDragend:t[2]||(t[2]=(...t)=>e.removeClass&&e.removeClass(...t)),onDragover:t[3]||(t[3]=(...t)=>e.moveLocation&&e.moveLocation(...t))},[(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(e.locations,e=>(Object(r["s"])(),Object(r["d"])(d,{"data-id":e.id,draggable:"true",class:"location",key:e.id,location:e},null,8,["data-id","location"]))),128))],32)):Object(r["e"])("",!0),Object(r["i"])(l,{onError:t[4]||(t[4]=t=>e.setError(t))})])}const se={class:"root"},ce={class:"menu"};function ae(e,t,o,i,s,c){const a=Object(r["A"])("font-awesome-icon"),n=Object(r["A"])("router-link");return Object(r["s"])(),Object(r["f"])("div",se,[Object(r["g"])("div",ce,[Object(r["i"])(a,{class:"menu_icon",icon:"fa-solid fa-bars"})]),Object(r["i"])(n,{to:"/city/"+e.location.id,class:"location_name"},{default:Object(r["G"])(()=>[Object(r["h"])(Object(r["C"])(e.location.city)+", "+Object(r["C"])(e.location.country),1)]),_:1},8,["to"]),Object(r["g"])("button",{onClick:t[0]||(t[0]=t=>e.removeLocation(e.location.id)),class:"delete"},[Object(r["i"])(a,{class:"delete_icon",icon:"fa-solid fa-xmark"})])])}var ne=Object(r["j"])({name:"LocationCard",props:{location:{type:Object,reqired:!0,default:()=>({id:0,city:"",country:""})}},methods:{removeLocation(e){h.commit(l,e)}}});o("3d81");const de=w()(ne,[["render",ae],["__scopeId","data-v-6f7b2ed6"]]);var le=de;const ue={key:0,class:"results"};function he(e,t,o,i,s,c){const a=Object(r["A"])("search-result");return Object(r["s"])(),Object(r["f"])(r["a"],null,[Object(r["H"])(Object(r["g"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.city=t),onInput:t[1]||(t[1]=(...t)=>e.searchTimeOut&&e.searchTimeOut(...t)),placeholder:"Start input place",class:"search_input"},null,544),[[r["E"],e.city]]),e.results?(Object(r["s"])(),Object(r["f"])("div",ue,[(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(e.results,t=>(Object(r["s"])(),Object(r["d"])(a,{key:t.id,onAddLocation:o=>e.addLocation(t)},{default:Object(r["G"])(()=>[Object(r["h"])(Object(r["C"])(t.city)+", "+Object(r["C"])(t.country),1)]),_:2},1032,["onAddLocation"]))),128))])):Object(r["e"])("",!0)],64)}const be={class:"result_item"},me={class:"result_name"};function pe(e,t,o,i,s,c){const a=Object(r["A"])("font-awesome-icon");return Object(r["s"])(),Object(r["f"])("div",be,[Object(r["g"])("div",me,[Object(r["z"])(e.$slots,"default",{},void 0,!0)]),Object(r["g"])("button",{onClick:t[0]||(t[0]=t=>e.$emit("addLocation")),class:"add_button"},[Object(r["i"])(a,{class:"add_icon",icon:"fa-solid fa-plus"})])])}var Oe=Object(r["j"])({name:"SearchResult",emits:["addLocation"],methods:{add(){this.$emit("addLocation")}}});o("48fb");const je=w()(Oe,[["render",pe],["__scopeId","data-v-38ca150f"]]);var fe=je,ve=Object(r["j"])({name:"SearchComponent",components:{SearchResult:fe},emits:["error"],data(){return{country:"",city:"",results:new Array,timer:0}},methods:{addLocation(e){h.commit(n,{id:e.id,city:e.city,country:e.country,country_code:e.country_code}),this.city="",this.results=[],this.$router.push("city/"+e.id)},async searchTimeOut(){this.timer&&(clearTimeout(this.timer),this.timer=0),this.timer=setTimeout(()=>{this.searchCity()},500)},async searchCity(){try{const e=`https://nominatim.openstreetmap.org/search/${this.city}?format=json&addressdetails=1&limit=5&polygon_svg=1`,t=await fetch(e),o=await t.json(),r=o.map(e=>{if("object"==typeof e||null!==e)return{id:e.place_id,city:e.address.city?e.address.city:e.address.town?e.address.town:e.address.state,country:e.address.country,country_code:e.address.country_code}});this.results=r}catch(e){e instanceof Error&&(this.setError(e.message),console.log(e.message))}},setError(e){this.$emit("error",e)}}});o("cb6e");const ge=w()(ve,[["render",he],["__scopeId","data-v-64113b57"]]);var we=ge,ye=Object(r["j"])({name:"Settings",components:{LocationCard:le,SearchComponent:we},emits:["error"],computed:{locations(){return h.getters.getLocations}},methods:{setClass(e){const t=e.target;t&&t.classList.add("selected")},removeClass(e){const t=e.target;t&&t.classList.remove("selected")},moveLocation(){const e=document.querySelector(".locations");e&&e.addEventListener("dragover",t=>{var o,r;t.preventDefault();const i=e.querySelector(".selected"),s=t.target,c=i!==s;var a,n;c&&(null!==i&&void 0!==i&&null!==(o=i.dataset)&&void 0!==o&&o.id&&null!==s&&void 0!==s&&null!==(r=s.dataset)&&void 0!==r&&r.id&&h.commit(u,{movingId:+(null===(a=i.dataset)||void 0===a?void 0:a.id),idTochange:+(null===(n=s.dataset)||void 0===n?void 0:n.id)}))})},setError(e){this.$emit("error",e)}}});o("a470");const _e=w()(ye,[["render",ie],["__scopeId","data-v-398b9082"]]);var Ce=_e;function ke(e,t,o,i,s,c){const a=Object(r["A"])("weather-view");return Object(r["s"])(),Object(r["d"])(a,{weather:e.weather},null,8,["weather"])}var xe=Object(r["j"])({name:"City",components:{WeatherView:z},emits:["error"],created(){this.location=h.getters.getLocationById(+this.$route.params.id),this.getWeather()},data(){return{weather:new R,location:new c}},methods:{async getWeather(){try{const e=`https://api.openweathermap.org/data/2.5/weather?q=${this.location.city},${this.location.country_code}&appid=${K}`,t=await fetch(e);if(200!==t.status)throw new Error(t.statusText);const o=await t.json();this.weather=o}catch(e){e instanceof Error&&this.setError(e.message)}},setError(e){this.$emit("error",e)}}});const Le=w()(xe,[["render",ke]]);var Ee=Le;const Ae=[{path:"/",name:"Home",component:Y},{path:"/settings",name:"Settings",component:Ce},{path:"/city/:id",name:"City",component:Ee}],Se=Object(E["a"])({history:Object(E["b"])("/vue-weather-widget/"),routes:Ae});var Te=Se,Ie=o("ecee"),$e=o("ad3d"),We=o("c074");Ie["c"].add(We["c"],We["a"],We["b"],We["f"],We["e"],We["d"]);class Fe extends HTMLElement{connectedCallback(){Object(r["c"])(x).use(h).use(Te).component("font-awesome-icon",$e["a"]).mount("#app")}}customElements.define("vue-weather-widget",Fe)},de5d:function(e,t,o){}});
//# sourceMappingURL=app.b2890b94.js.map